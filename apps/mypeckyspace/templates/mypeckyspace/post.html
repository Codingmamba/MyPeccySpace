<html>
    <head>
         <meta charset="utf-8">
         <title>Post:'{{post.title}}'</title>
         {% load static %}
         <link rel="stylesheet" href="{% static 'mypeckyspace/style2.css' %}">
    </head>
    <body>
        <main>
            <div id="links">
                <a href="/dashboard">Home</a> 
                <a href="/">Logout</a> 
            </div>
            <h2>{{post.title}}</h2>
            <p>{{post.content}}</p>
            {% if post.upload %}
                <a href="{{post.id}}/file"><img src="{{post.upload.url}}" width="100" alt="Attached File"></a>
            {% endif %}
           
            <h4>Posted by <a href="/user/{{post.creator.id}}">{{post.creator.username}}</a> <a href="/user/{{post.creator.id}}"><img src="{{post.creator.image.url}}" width="20" height="20" alt="User's Image"></a> on {{post.created_at}}</h4>
            
            {% if post.creator.id == request.session.id %}
            <form action="{{post.id}}/uploadfile" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="file" name="myfile">
                <button type="submit">Upload</button>
            </form>
            {% endif %}
            {% for comment in comments %} 
                {% if comment.post.id == post.id %}
                    <p>{{comment.text}}</p>
                    <p><a href="user/{{comment.commenter.id}}">{{comment.commenter.username}}</a> commented on {{comment.created_at}}</p>
                    {% if comment.commenter.id == request.session.id  %}
                    <form action="comment/{{comment.id}}/delete" method="post">
                        {% csrf_token %}
                        <input type="submit" value="Delete">
                    </form>
                    {% endif %}
                {% endif %}
            {% endfor %}
            <form action="{{post.id}}/comment" method="post">
                {% csrf_token %}
                <label> 
                        <input type="text" name="text" placeholder="Enter comment" style="margin-left: 49px;"> 
                </label>
                <input type="submit" value="Comment">
            </form>
        </main>

        <div>
            <form action="/add" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <label>
                        Add Question or Share your knowledge: 
                        <br>
                        <input type="text" name="title" placeholder="Enter title">
                        <br>
                        <br>
                        <textarea rows=5 cols=25 type="text" name="content" placeholder="Enter text"></textarea>
                </label>
                <input type="submit" value="Post">
                
                <p>Screenshot: <input type="file" name="myfile"> </p>
            </form>
        </div>

    </body>
</html>